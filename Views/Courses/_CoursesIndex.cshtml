@model IEnumerable<CollegeAndCourses.Models.Course>

<table class="table11" id="_CourseIndexModal">
    <thead>
        <tr>
            @* <th>
                @Html.DisplayNameFor(model => model.CourseId)

            </th> *@
            <th>
                @* @Html.DisplayNameFor(model => model.Name) *@
                <a data-target="_CourseIndexModal" href="#" class="sort" data-sort-by="Name">Name</a>

            </th>
            <th>
                @Html.DisplayNameFor(model => model.Fees)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DurationOfCourse)
            </th>
            
            <th>
                @Html.DisplayNameFor(model => model.Publish)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CoureseFor)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PublicationAccrediet)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FreeCourese)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.BooksForCourse)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.BracodeOfBook)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AvailablesON)
            </th>

            <th></th>
        </tr>
    </thead>
    <tbody>
        
@foreach (var item in Model) {
            <tr>
           @*      <td>
                    @Html.DisplayFor(modelItem => item.CourseId)
                </td> *@
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Fees)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DurationOfCourse)
                </td>
                
                <td>
                    @Html.DisplayFor(modelItem => item.Publish)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CoureseFor)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PublicationAccrediet)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.FreeCourese)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.BooksForCourse)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.BracodeOfBook)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.AvailablesONString)
                </td>
            <td>
                  @*   <a asp-action="Edit" asp-controller="Courses" asp-route-id="@item.CourseId">Edit</a>|
                    <button class="editButton btn-primary" id="editButton" class="editButton" data-id="@item.CourseId">
                        Edit Button
                    </button> | *@
                    @* <a asp-controller="Courses" class="openDetailsModal" asp-action="Details" asp-route-id="@item.CourseId" data-id="@item.CourseId">Details</a> | *@
                    @* <a href="javascript:void(0);"  data-id="@item.CourseId">Details111</a> | *@

                    @* <a asp-controller="Courses" asp-action="Delete" asp-route-id="@item.CourseId">Delete</a> *@
                    @* <a class="delete-link btn btn-primary" data-id="@item.CourseId" >Delete</a> *@
                    @* <a class="C-Delete btn btn-danger" data-id="@item.CourseId" data-name="@item.Name">Delete</a> *@

                    <button class="btn btn-success edit1-button" data-id="@item.CourseId">Edit</button>|
                    <button class="btn btn-primary Detail-button" data-id="@item.CourseId">Details</button>

                    <button class="btn btn-danger CourseDelete" data-id="@item.CourseId" data-name="@item.Name">Delete</button>
                  
            </td>
        </tr>
        }
    </tbody>
</table>

@section Scripts {
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.8/css/dataTables.dataTables.css" />

    <script src="https://cdn.datatables.net/2.0.8/js/dataTables.js"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <script>
    $(document).ready(function () {
        // Show modal when clicking Create New button
        $('#openCreateModal').click(function () {
            // Load the Create.cshtml modal content via AJAX
            $.ajax({
                url: '@Url.Action("Create", "Courses")',
                type: 'GET',
                success: function (data) {
                    debugger;
                    $('#modalPlaceholder').html(data);
                    $('#createModal').modal('show');
                },
                error: function () {
                    alert('Failed to load create student modal.');
                }
            });
        });
            $('.openDetailsModal').click(function () {
                var courseId = $(this).data('id');
                $.ajax({
                    url: '@Url.Action("Details", "Courses")',
                    type: 'GET',
                    data: { id: courseId },
                    success: function (data) {
                        debugger;
                        $('#modalPlaceholder11').html(data);
                        $('#detailsModal').modal('show');
                    },
                    error: function () {
                        alert('Failed to load course details.');
                    }
                });
            });
            $(document).on('click', '#closeDetailModal', function () {
                $('#detailModal').modal('hide');
            });


        $('.delete-link').click(function (e) {
            e.preventDefault();
            var id = $(this).data('id');
            var confirmDelete = confirm('Are you sure you want to delete this course?');
            if (confirmDelete) {
                var url = '@Url.Action("Delete", "Courses")';
                window.location.href = url + '/' + id;
            }
        });
        // $('#_CourseIndexModal').dataTable();

      
    });

   
</script>
}
<div id="modalPlaceholder"></div>
<div id="modalPlaceholder11"></div>



